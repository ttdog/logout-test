<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Logout Redirect</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <h1>ログアウト確認</h1>
    <p>以下のボタンを押して、アプリへ戻りログアウトを完了させてください。</p>

    <a id="link" href="https://spuru.com/logout" style="display:inline-block; padding:20px; background:blue; color:white; text-decoration:none; border-radius:10px; font-weight:bold;">
        アプリに戻る
    </a>

    <script>
        // ページ読み込み時に実行
        window.onload = function() {
            var linkElement = document.getElementById('link');
            var baseUrl = linkElement.href;
            var currentQuery = window.location.search; // 現在のページの ? 以降を取得

            if (currentQuery) {
                // 現在のクエリ文字列を href の末尾に結合
                // baseUrlに ? が含まれていない前提なら単純結合でもOKですが、安全のため判定
                var separator = baseUrl.includes('?') ? '&' : '?';
                var finalUrl = baseUrl + separator + currentQuery.substring(1);
                
                linkElement.href = finalUrl;
            }
            
            console.log("Final Redirect URL: " + linkElement.href);
        };
    </script>
</body>
</html>
